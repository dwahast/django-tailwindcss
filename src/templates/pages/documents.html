{% extends "base.html" %}

{% load partials %}
{% load markdown_deux_tags %} 

{% partialdef document-content %}
   
    <div id="documentContent" class="p-4 border-2 border-gray-200 border-dashed rounded-lg dark:border-gray-700 mt-2">
        {{ doc.text | markdown }}
        {% comment %} Handle OpenAPI models {% endcomment %}
        {% comment %} <div id="swagger-ui"></div>
        <script src="https://unpkg.com/swagger-ui-dist@3/swagger-ui-bundle.js"></script>
        <script>
            const ui = SwaggerUIBundle({
                url: "{% url 'schema' %}",
                dom_id: '#swagger-ui',
                presets: [
                    SwaggerUIBundle.presets.apis,
                    SwaggerUIBundle.SwaggerUIStandalonePreset
                ],
                layout: "BaseLayout",
                requestInterceptor: (request) => {
                    request.headers['X-CSRFToken'] = "{{ csrf_token }}"
                    return request;
                }
            })
        </script> {% endcomment %}
    </div>
{% endpartialdef %}

{% block content %}

   {% include 'components/sidebar/sidebar.html' with items=items%}
   <div class="mt-12 p-4 sm:ml-64">
      {% comment %} {% include 'components/drawer/drawer.html' %} {% endcomment %}
      <h1 class="mt-10 p-2" >{{doc.title}}</h1>
      {% partial document-content %}
   </div>

{% endblock %}